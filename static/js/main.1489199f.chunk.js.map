{"version":3,"sources":["components/Index.js","components/Logout.js","components/BarStatus.js","assets/icon.svg","components/IconLocation.js","components/MarkerPopup.js","components/Markers.js","components/Geolocation.js","components/Jobs.js","App.js","index.js"],"names":["Index","useState","latitude","longitude","email","password","state","setstate","history","useHistory","useEffect","navigator","geolocation","getCurrentPosition","position","coords","error","console","log","enableHighAccuracy","handleSubmit","a","axios","post","result","localStorage","setItem","data","access_token","getUser","alert","token","get","headers","Authorization","JSON","stringify","push","handleOnChange","e","target","name","value","className","src","alt","htmlFor","type","id","onChange","onClick","Logout","removeItem","BarStatus","loggedUser","setloggedUser","isAuthorized","getItem","parse","IconLocation","L","icon","iconUrl","Icon","iconRetinaUrl","iconAnchor","shadowUrl","shadowSize","shadowAnchor","iconSize","MarkerPopup","props","job","title","image","assigned_to","Popup","Markers","jobs","map","Marker","lat","lng","Geolocation","coordinates","currentLocation","zoom","allJobs","location","useLocation","jobLatitude","jobLongitude","myLocation","created_at","date","description","status","updated_at","Map","center","TileLayer","url","attribution","Jobs","setAllJobs","setcoordinates","getJobs","App","basename","process","exact","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1489199f.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport {useHistory} from 'react-router-dom'\r\n\r\n//component \r\nimport axios from 'axios'\r\n\r\nconst Index = () => {\r\n  const [state, setstate] = useState({\r\n    latitude: 0,\r\n    longitude: 0,\r\n    email:'',\r\n    password:'',\r\n  });\r\n\r\n  let history = useHistory()\r\n\r\n  useEffect(() => {\r\n    navigator.geolocation.getCurrentPosition(\r\n      (position) => {\r\n        setstate({\r\n          latitude: position.coords.latitude,\r\n          longitude: position.coords.longitude,\r\n        });\r\n      },\r\n      (error) => console.log(error),\r\n      { enableHighAccuracy: true }\r\n    );\r\n  },[]);\r\n\r\n  const handleSubmit = async() => {\r\n    try {\r\n      const result = await axios.post('https://coding-test.rootstack.net/api/auth/login',{\r\n        email: state.email,\r\n        password: state.password\r\n      })  \r\n      localStorage.setItem('access_token', result.data.access_token)\r\n      getUser(result.data.access_token)\r\n   \r\n    } catch (error) {\r\n      console.log('index error',error)\r\n      alert('An error has ocurred, please contact the administrator')\r\n    }\r\n  }\r\n\r\n  const getUser = async (token) => {\r\n    try {\r\n      var result = await axios.get(\r\n        'https://coding-test.rootstack.net/api/auth/me',\r\n        {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        }\r\n      );\r\n      localStorage.setItem('user', JSON.stringify(result.data));\r\n      \r\n      history.push('/jobs',state)\r\n\r\n    } catch (error) {\r\n      console.log(error)\r\n      alert(\r\n        'An error has ocurred getting the logged user, please contact the administrator'\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleOnChange = (e) => {\r\n    setstate({...state, [e.target.name]: e.target.value})\r\n  }\r\n\r\n  return <div className=\"login-container\">\r\n        <img className=\"login-img\" src=\"#\" alt=\"\" />\r\n        <label className=\"login-label\" htmlFor=\"email\">Email:</label>\r\n        <input className=\"login-textbox\" type=\"text\" name=\"email\" id=\"email\" onChange={e => handleOnChange(e)}/>\r\n        <label className=\"login-label\" htmlFor=\"password\">Password:</label>\r\n        <input className=\"login-textbox\" type=\"password\" name=\"password\" id=\"password\" onChange={e => handleOnChange(e)}/>\r\n        <input className=\"login-button\" type=\"button\" value=\"Sign in now\" onClick={handleSubmit} />\r\n  </div>\r\n};\r\n\r\nexport default Index;\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst Logout = () => {\r\n\r\n  let history = useHistory()\r\n\r\n  const getLogout = (e) => {\r\n    localStorage.removeItem('access_token');\r\n    localStorage.removeItem('user');\r\n    history.push('/')\r\n  };\r\n  return (\r\n    <div>\r\n      <input\r\n        className=\"logout-button\"\r\n        type=\"button\"\r\n        value=\"Logout\"\r\n        onClick={(e) => getLogout(e)}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Logout;\r\n","import React, { useEffect, useState } from 'react';\r\n\r\n//components\r\nimport Logout from './Logout';\r\nconst BarStatus = () => {\r\nconst [loggedUser, setloggedUser] = useState({})\r\n\r\n  useEffect(() => {\r\n    isAuthorized()\r\n  },[])\r\n\r\n  const isAuthorized = () =>{\r\n\r\n    if(localStorage.getItem('user') !== null)\r\n    {      \r\n      const loggedUser = JSON.parse(localStorage.getItem('user'))\r\n      setloggedUser(loggedUser)\r\n    }\r\n  }\r\n    return (\r\n    <div className=\"bar-status\">\r\n      <div className=\"logged-user\">Welcome {loggedUser.name} ({loggedUser.email}) \r\n      <img className=\"button-location\" alt=\"\" />\r\n      </div>\r\n      <Logout />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BarStatus;\r\n","export default __webpack_public_path__ + \"static/media/icon.fdcd72ec.svg\";","import L from 'leaflet'\r\n\r\nimport Icon from '../assets/icon.svg'\r\n\r\nexport const IconLocation = L.icon({\r\n    iconUrl: Icon,\r\n    iconRetinaUrl: Icon,\r\n    iconAnchor: null,\r\n    shadowUrl: null,\r\n    shadowSize: null,\r\n    shadowAnchor: null,\r\n    iconSize: [40,40],\r\n    className: 'leaflet-venue-icon'\r\n})\r\n","import React from 'react';\r\nimport { Popup } from 'react-leaflet';\r\n\r\nconst MarkerPopup = (props) => {\r\n  const { title, image, latitude, longitude, assigned_to } = props.job;\r\n  return (\r\n    <Popup>\r\n      <div className=\"marker-popup\">\r\n        <span className=\"market-title\">Title: {title}</span>\r\n        <span className=\"market-title\">Assigned to: {assigned_to}</span>\r\n        <img className=\"market-img\" src={image} alt={title} />\r\n        <span className=\"market-title\">Lat: {latitude}</span>\r\n        <span className=\"market-title\">Lng: {longitude}</span>\r\n      </div>\r\n    </Popup>\r\n  );\r\n};\r\n\r\nexport default MarkerPopup;\r\n","import React from 'react';\r\nimport { Marker } from 'react-leaflet';\r\nimport { IconLocation } from './IconLocation';\r\n\r\n//component\r\nimport MarkerPopup from './MarkerPopup';\r\n\r\nconst Markers = (props) => {\r\n  const { jobs } = props;\r\n  const markers = jobs.map((job) => (\r\n    <Marker key={job.id} position={{lat:job.latitude, lng:job.longitude}} icon={IconLocation}>\r\n      <MarkerPopup job={job} />\r\n    </Marker>\r\n  ));\r\n  return markers;\r\n};\r\n\r\nexport default Markers;\r\n","import React, {useState, useEffect} from 'react';\r\nimport {useLocation} from 'react-router-dom'\r\nimport { Map, TileLayer } from 'react-leaflet';\r\n\r\n\r\n//components\r\nimport Markers from './Markers'\r\n\r\n\r\n//lealeft style\r\nimport 'leaflet/dist/leaflet.css'\r\n\r\nconst Geolocation = ({jobs, coordinates}) => {\r\n  const [state, setstate] = useState({\r\n    currentLocation: {lat:'0', lng:'0'},\r\n    zoom:13,\r\n    allJobs:[],\r\n  })\r\n  \r\n  const location = useLocation()\r\n\r\n  useEffect(()=>{\r\n    if(location.state.latitude && location.state.longitude)\r\n    {\r\n      const currentLocation = {\r\n        lat: coordinates.jobLatitude === 0 ? location.state.latitude : coordinates.jobLatitude,\r\n        lng: coordinates.jobLongitude === 0 ? location.state.longitude : coordinates.jobLongitude\r\n      }\r\n      const myLocation = {\r\n        assigned_to: \"Logged user\",\r\n        created_at: \"\",\r\n        date: \"\",\r\n        description: \"\",\r\n        id: 0,\r\n        image: \"\",\r\n        latitude: currentLocation.lat,\r\n        longitude: currentLocation.lng,\r\n        status: \"\",\r\n        title: \"My location\",\r\n        updated_at: \"\"\r\n      }\r\n      const allJobs = [...jobs, myLocation]\r\n\r\n      setstate({...state, currentLocation, allJobs})\r\n\r\n    }\r\n  },[jobs, coordinates])\r\n\r\n  return (\r\n    <Map center={state.currentLocation} zoom={state.zoom}>\r\n        <TileLayer\r\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n        attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n      />\r\n      <Markers jobs={state.allJobs}/>\r\n    </Map>\r\n  );\r\n}\r\n\r\nexport default Geolocation","import React, { useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\n//component\r\nimport BarStatus from './BarStatus';\r\nimport GeoLocation from './Geolocation';\r\n\r\nconst Jobs = () => {\r\n  const [allJobs, setAllJobs] = useState([]);\r\n  const [coordinates, setcoordinates] = useState({\r\n    jobLatitude: 0,\r\n    jobLongitude: 0,\r\n  });\r\n\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    isAuthorized();\r\n    getJobs();\r\n  }, []);\r\n\r\n  const isAuthorized = () => {\r\n    if (localStorage.getItem('access_token') === null) {\r\n      console.log('jobs isAuthorized');\r\n      history.push('/');\r\n    }\r\n  };\r\n\r\n  const getJobs = async () => {\r\n    try {\r\n      const token = localStorage.getItem('access_token');\r\n      const jobs = await axios.get(\r\n        'https://coding-test.rootstack.net/api/jobs',\r\n        {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        }\r\n      );\r\n      setAllJobs(jobs.data.data);\r\n    } catch (error) {\r\n      alert(\r\n        'An error has ocurred getting the jobs, please contact the administrator'\r\n      );\r\n    }\r\n  };\r\n\r\n  const getJobCoordinates = (lat, lng) => {\r\n    setcoordinates({ jobLatitude: lat, jobLongitude: lng });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <BarStatus />\r\n      <div className=\"job-container\">\r\n        <ul className=\"jobs\">\r\n          {allJobs.map((job) => (\r\n            <div className=\"job-item-button\">\r\n              <li className=\"job-item\" key={job.id}>\r\n                <img className=\"job-img\" src={job.image} alt={job.title} />\r\n                <span className=\"job-title\">{job.title}</span>\r\n              </li>\r\n              <input\r\n                className=\"go-button\"\r\n                type=\"button\"\r\n                value=\"Go\"\r\n                onClick={() => getJobCoordinates(job.latitude, job.longitude)}\r\n              />\r\n            </div>\r\n          ))}\r\n        </ul>\r\n        <GeoLocation jobs={allJobs} coordinates={coordinates} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Jobs;\r\n","import './App.css';\n\nimport {BrowserRouter as Router, Switch, Route} from 'react-router-dom'\n\n//components\nimport Index from './components/Index'\nimport Jobs from './components/Jobs'\n\n\nfunction App() {\n  return (\n    <div className=\"general-container\">\n    <Router basename={process.env.PUBLIC_URL}>\n      <Switch>\n        <Route exact path='/jobs' component={Jobs}/>\n        <Route exact path='/' component={Index}/>\n      </Switch>\n    </Router>\n    </div>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n//custom style\nimport './style/style.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App/>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals"],"sourceRoot":""}